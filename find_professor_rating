import requests
from bs4 import BeautifulSoup

def find_professor_rating(professor_name):
    """Given the name of a proffessor this returns the RMP summary"""
    url = f"https://www.ratemyprofessors.com/search/professors/18418?q={professor_name.replace(' ', '%20')}"
    
    response = requests.get(url, headers={"User-Agent": "Mozilla/5.0"})
    soup = BeautifulSoup(response.text, 'html.parser')
    #
    for card in soup.select('a.TeacherCard__StyledTeacherCard-syjs0d-0'):
        name_element = card.select_one('.CardName__StyledCardName-sc-1gyrgim-0')
        if name_element and name_element.text.strip().lower() == professor_name.lower():
            dept = card.select_one('.CardSchool__Department-sc-19lmz2k-0')
            rating = card.select_one('.CardNumRating__CardNumRatingNumber-sc-17t4b9u-2')
            
            feedback_nums = card.select('.CardFeedback__CardFeedbackNumber-lq6nix-2')
            difficulty = feedback_nums[1].text if len(feedback_nums) > 1 else "N/A"
            
            result = [4]
            return f"{name_element.text.strip()} | {dept.text} | Rating: {rating.text}/5.0 | Difficulty: {difficulty}/5.0"
    
    return f"Professor '{professor_name}' not found at Madison"

